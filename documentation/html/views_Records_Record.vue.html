<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>FAIRsharing.org Source: views/Records/Record.vue</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.yeti.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">FAIRsharing.org</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="Static.html">Static</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-Home.html">Home</a></li><li><a href="module-Login.html">Login</a></li><li><a href="module-NavbarTop.html">NavbarTop</a></li><li><a href="module-NewRecord.html">NewRecord</a></li><li><a href="module-Pagination.html">Pagination</a></li><li><a href="module-Signup.html">Signup</a></li><li><a href="module-Statistics.html">Statistics</a></li><li><a href="module-User.html">User</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="ExternalRESTClients.html">ExternalRESTClients</a></li><li><a href="GraphQLClient.html">GraphQLClient</a></li><li><a href="RESTClient.html">RESTClient</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#buildFacets">buildFacets</a></li><li><a href="global.html#buildFilters">buildFilters</a></li><li><a href="global.html#filtersStore">filtersStore</a></li><li><a href="global.html#introspectionStore">introspectionStore</a></li><li><a href="global.html#paramsAreExpired">paramsAreExpired</a></li><li><a href="global.html#parseParam">parseParam</a></li><li><a href="global.html#recordsStore">recordsStore</a></li><li><a href="global.html#recordStore">recordStore</a></li><li><a href="global.html#states">states</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			

		<h1 class="page-title">Source: views/Records/Record.vue</h1>
    
<section>
    <article>
        <pre
            class="sunlight-highlight-javascript linenums">&lt;template>
  &lt;v-main>
    &lt;h1 class="d-none">
      Content
    &lt;/h1>
    &lt;v-container
      v-if="queryTriggered"
      fluid
    >
      &lt;v-row v-if="error">
        &lt;v-col cols="12">
          &lt;v-alert type="error">
            {{ error }}
          &lt;/v-alert>
        &lt;/v-col>
      &lt;/v-row>

      &lt;v-row
        v-if="user().isLoggedIn &amp;&amp; !error"
        class="pr-3"
      >
        &lt;v-spacer />
        &lt;v-btn
          class="success"
          :href="'#/' + currentRoute + '/edit'"
        >
          EDIT
        &lt;/v-btn>
      &lt;/v-row>

      &lt;!--  Content  -->
      &lt;v-row
        v-if="currentRecord['fairsharingRecord'] &amp;&amp; !error"
        no-gutters
      >
        &lt;v-col
          cols="12"
          lg="12"
          md="12"
          xl="12"
        >
          &lt;v-row
            no-gutters
          >
            &lt;v-col>
              &lt;GeneralInfo />
            &lt;/v-col>
          &lt;/v-row>

          &lt;!-- Single Row -->
          &lt;v-row>
            &lt;!--Left Column-->
            &lt;v-col :cols="$vuetify.breakpoint.mdAndDown?'12':'6'">
              &lt;!-- KEYWORDS -->
              &lt;Keywords
                :taxonomies="currentRecord['fairsharingRecord'].taxonomies"
                :domains="currentRecord['fairsharingRecord'].domains"
                :subjects="currentRecord['fairsharingRecord'].subjects"
              />

              &lt;!-- SUPPORT -->
              &lt;Support
                :contactData="currentRecord['fairsharingRecord'].metadata.contacts"
                :supportLinkData="null"
              />

              &lt;!-- ORGANISATION -->
              &lt;Organisations :organisationData="currentRecord['fairsharingRecord'].organisations" />
            &lt;/v-col>
            &lt;!--Right Column-->
            &lt;v-col :cols="$vuetify.breakpoint.mdAndDown?'12':'6'">
              &lt;!-- LICENCES -->
              &lt;Licences :licence-data="currentRecord['fairsharingRecord'].licences" />

              &lt;!-- MAINTAINERS -->
              &lt;Maintainers :maintainerData="currentRecord['fairsharingRecord'].maintainers" />

              &lt;!-- GRANTS -->
              &lt;Grants :grantData="currentRecord['fairsharingRecord'].grants" />

              &lt;!-- PUBLICATIONS -->
              &lt;Publications :publicationData="currentRecord['fairsharingRecord'].publications" />
            &lt;/v-col>
          &lt;/v-row>
          &lt;!-- Associated Records -->
          &lt;v-row
            no-gutters
          >
            &lt;v-col>
              &lt;v-card
                class="pa-4 mt-2 d-flex flex-column"
                outlined
                tile
                elevation="1"
              >
                &lt;div class="title-style">
                  &lt;div>
                    &lt;h4>
                      ASSOCIATED
                      RECORDS
                    &lt;/h4>
                    &lt;span class="triangle-bottomLeft" />&lt;span
                      class="triangle-bottomRight"
                    />
                  &lt;/div>
                &lt;/div>
                &lt;section class="mt-2">
                  &lt;v-card class="mt-3">
                    &lt;v-card-title>
                      Data Table
                      &lt;v-spacer />
                      &lt;v-text-field
                        v-model="search"
                        append-icon="mdi-magnify"
                        label="Search"
                        single-line
                        hide-details
                      />
                    &lt;/v-card-title>
                    &lt;v-data-table
                      :headers="headers"
                      :items="recordAssociations"
                      :search="search"
                    />
                  &lt;/v-card>
                &lt;/section>
              &lt;/v-card>
            &lt;/v-col>
          &lt;/v-row>
        &lt;/v-col>
      &lt;/v-row>
    &lt;/v-container>
  &lt;/v-main>
&lt;/template>

&lt;script>
  import {mapActions, mapState} from 'vuex'
  import Client from '@/components/GraphClient/GraphClient.js'
  import GeneralInfo from "../../components/Records/Record/GeneralInfo";
  import Grants from '@/components/Records/Record/Grants';
  import Keywords from '@/components/Records/Record/Keywords';
  import Licences from '@/components/Records/Record/Licences';
  import Maintainers from '@/components/Records/Record/Maintainers';
  import Organisations from '@/components/Records/Record/Organisations';
  import Publications from '@/components/Records/Record/Publications';
  import Support from '@/components/Records/Record/Support';

  import recordMixin from '@/utils/recordMixin';

  export default {
    name: "Record",
    components: {
      GeneralInfo,
      Grants,
      Keywords,
      Licences,
      Maintainers,
      Organisations,
      Publications,
      Support
    },
    mixins: [recordMixin],
    data: () => {
      return {
        error: null,
        queryTriggered: false,
        search: '',
        headers: [
          { text: 'Name', value: 'name' },
          { text: 'Registry', value: 'registry' },
          { text: 'Relationship', value: 'recordAssocLabel' },
          { text: 'Subject', value: 'subject' },
        ],
        showScrollToTopButton: false,
        recordAssociations: []
      }
    },
    computed: {
      currentRoute () {
        let id = this.$route.params['id'];
        if (id.includes("FAIRsharing.")) {
          return "10.25504/" + id;
        }
        return this.$route.params['id'];
      },
      ...mapState('record', ["currentRecord", "currentRecordHistory"]),
      ...mapState('users', ["user"]),
      getTitle () {
        return 'FAIRsharing | ' + this.currentRoute;
      },
    },
    watch: {
      async currentRoute() {
        await this.getData();
      }
    },
    mounted() {
      this.$nextTick(async function () {
        this.client = new Client();
        await this.getData();
      })
    },
    methods: {
      ...mapActions('record', ['fetchRecord', "fetchRecordHistory"]),
      /** Combines associations and reserveAssociations into a single array and prepare the data for the search table */
      prepareAssociations (associations, reverseAssociations) {
        let _module = this;
        let joinedArrays = associations.concat(reverseAssociations);
        const properties = ['fairsharingRecord', 'linkedRecord'];
        joinedArrays.forEach(item => {
          let object = {
            recordAssocLabel: _module.cleanString(item.recordAssocLabel),
            subject: _module.currentRecord['fairsharingRecord'].name
          };
          properties.forEach(prop => {
            if (Object.prototype.hasOwnProperty.call(item, prop)) {
              object.id = item[prop].id;
              object.registry = item[prop].registry;
              object.name = item[prop].name;
            }
          });
          _module.recordAssociations.push(object);
        });
      },
      /**
       * Method to set the current record in the store
       * @returns {Promise} - the current record
       * */
      async getData () {
        let _module = this;
        this.queryTriggered = false;
        this.error = null;
        try {
          await _module.fetchRecord(this.currentRoute);
          const currentRecord = _module.currentRecord['fairsharingRecord'];
          _module.recordAssociations = [];
          if (Object.prototype.hasOwnProperty.call(currentRecord, "recordAssociations") || Object.prototype.hasOwnProperty.call(currentRecord, "reverseRecordAssociations")) {
            _module.prepareAssociations(_module.currentRecord['fairsharingRecord'].recordAssociations, _module.currentRecord['fairsharingRecord'].reverseRecordAssociations)
          }
        }
        catch (e) {
          this.error = e.message;
        }
        this.queryTriggered = true;
      },
      /**
       * Method to dispatch the current record history into the store
       * @returns {Promise} - the current record history
       * */
      async getHistory () {
        await this.$store.dispatch("record/fetchRecordHistory", this.currentRoute);
      }
    },
    metaInfo() {
      return {
        title: this.getTitle
      }
    },
  }
&lt;/script>

&lt;style scoped lang="scss">
  a {
    text-decoration: none;

    &amp;:hover, &amp;:focus {
      text-decoration: underline;
      outline: 0;
    }
  }

  .flag-mr {
    margin-right: .29em;
  }

  #banner {
    display: flex;
    justify-content: center;
    flex-direction: column;
    padding: 1em;
  }

  .content-custom {
    max-height: 100vh;
    scroll-behavior: smooth;
    padding: 0;
  }

  .title-style {
    position: absolute;
    top: -10px;
    background: linear-gradient(#4f5f5d, #00aa8e);
    background: -moz-linear-gradient(#4f5f5d, #00aa8e);
    background: -webkit-linear-gradient(#4f5f5d, #00aa8e);
    background: -o-linear-gradient(#4f5f5d, #00aa8e);
    padding: 1px 10px 1px 10px;
    border-radius: 10px;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;

    div {
      position: relative;

      h4 {
        font-size: 1rem;
        color: white;
      }

      .triangle-bottomLeft {
        width: 0;
        height: 0;
        position: absolute;
        top: 0;
        left: -18px;
        border-bottom: 8px solid #aaaaaa;
        border-left: 8px solid transparent;
      }

      .triangle-bottomRight {
        width: 0;
        height: 0;
        position: absolute;
        top: 0;
        right: -18px;
        border-bottom: 8px solid #aaaaaa;
        border-right: 8px solid transparent;
      }
    }

  }
&lt;/style>
</pre>
    </article>
</section>





		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	DocStrap Copyright © 2012-2015 The contributors to the JSDoc3 and DocStrap projects.
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a>
	
		on Mon Jul 20th 2020
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>
